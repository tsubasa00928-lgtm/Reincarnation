<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>処世術禄｜人生二周目録</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- フォント -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap"
    rel="stylesheet"
  />

  <!-- 共通CSS / このページ専用CSS -->
  <link rel="stylesheet" href="../style.css" />
  <link rel="stylesheet" href="knowledge-notes.css" />
</head>
<body class="home-body page-knowledge-notes">
  <!-- ======================
       ヘッダー（ホームと統一イメージ）
       ====================== -->
  <header class="site-header">
    <div class="header-inner container">
      <div class="logo-block">
        <div class="logo-title">人生二周目録ーβ版</div>
        <div class="logo-sub">二周目視点で、人生をアップデートする</div>
      </div>

      <nav class="header-nav">
        <a href="../index.html" class="nav-link">ホーム</a>
        <a href="generations.html" class="nav-link">人生地図禄</a>
        <a href="knowledge-notes.html" class="nav-link is-current">処世術禄</a>
        <a href="life-stories.html" class="nav-link">人生体験禄</a>
        <a href="user-notes.html" class="nav-link">ユーザー機能</a>
        <a href="concept.html" class="nav-link">コンセプト</a>
      </nav>
    </div>
  </header>

  <!-- ======================
       メイン
       ====================== -->
  <main class="site-main">
    <div class="container">
      <!-- OS感のあるパネル全体 -->
      <div class="scroll-panel">
        <!-- ======================
             HERO
             ====================== -->
        <section class="hero-copy hero-knowledge">
          <div class="hero-inner">
            <div class="hero-heading-block">
              <h1 class="hero-section-title">処世術禄</h1>
              <div class="hero-section-underline"></div>
              <div class="hero-section-underline second"></div>
            </div>
            <p class="hero-text">
              人生を賢く、したたかに。世の教訓は5つのOSに構造化される。<br />
              情報が多すぎる時代に必要なのは、「断片的な知識」ではなく「構造化された知恵」。
            </p>
          </div>
        </section>

        <!-- ======================
             HEROより下：処世術禄 専用UI
             ====================== -->
        <div class="page-inner">
          <div class="kn-layout">
            <!-- 左サイド：処世術禄一覧タブ -->
            <aside class="kn-sidebar" id="kn-sidebar" aria-label="処世術禄一覧">
              <div class="kn-sidebar-title">処世術OS</div>

              <button class="kn-os-tab is-active" type="button" data-category="all">
                ≪トップ≫
              </button>

              <button class="kn-os-tab os-tab-mind" type="button" data-category="mind">
                <span class="kn-os-tab-main">1.心の扱い方</span><br />
                <span class="kn-os-label">内部OS</span>
              </button>

              <button class="kn-os-tab os-tab-relation" type="button" data-category="relation">
                <span class="kn-os-tab-main">2.人との関わり方</span><br />
                <span class="kn-os-label">対人OS</span>
              </button>

              <button class="kn-os-tab os-tab-work" type="button" data-category="work">
                <span class="kn-os-tab-main">3.社会での立ち回り</span><br />
                <span class="kn-os-label">社会OS</span>
              </button>

              <button class="kn-os-tab os-tab-habit" type="button" data-category="habit">
                <span class="kn-os-tab-main">4.行動・習慣の技術</span><br />
                <span class="kn-os-label">行動OS</span>
              </button>

              <button class="kn-os-tab os-tab-future" type="button" data-category="future">
                <span class="kn-os-tab-main">5.キャッチアップの極意</span><br />
                <span class="kn-os-label">未来OS</span>
              </button>

              <!-- ▼ 追加：OS横断検索タブ -->
              <button class="kn-os-tab os-tab-search" type="button" data-category="search">
                🔍 検索（OS横断）
              </button>
            </aside>

            <!-- メインコンテンツ -->
            <section class="kn-main">
              <!-- スマホ用：OSカテゴリ折りたたみトグル -->
              <button
                class="kn-sidebar-toggle"
                type="button"
                aria-expanded="false"
                aria-controls="kn-sidebar"
              >
                <span class="kn-sidebar-toggle-icon"></span>
                <span class="kn-sidebar-toggle-label">処世術OSを選ぶ</span>
              </button>

              <!-- ▼トップ専用：左右2カラム（左：悩み＋今日 / 右：構造カード） -->
              <div class="kn-top-shell" id="kn-top-shell">
                <!-- 左カラム -->
                <div class="kn-top-left">
                  <div class="kn-top-left-inner">
                    <!-- トップ専用コンテンツ -->
                    <section id="top-mode" aria-label="処世術禄トップモード">
                      <!-- 今の悩みから探す -->
                      <section class="kn-section kn-shortcuts-section" aria-label="今の悩みから探す">
                        <div class="kn-section-header kn-shortcuts-header">
                          <h2 class="kn-section-title">今の悩みから探す →</h2>
                          <p class="kn-section-subtitle">
                            いま気になっているテーマに近いボタンを押すと、そのキーワードで検索欄がセットされます。
                          </p>
                        </div>
                        <div class="kn-shortcut-list">
                          <button class="kn-shortcut" type="button" data-keyword="職場">🔘 職場</button>
                          <button class="kn-shortcut" type="button" data-keyword="恋愛">🔘 恋愛</button>
                          <button class="kn-shortcut" type="button" data-keyword="将来">🔘 将来</button>
                          <button class="kn-shortcut" type="button" data-keyword="メンタル">🔘 メンタル</button>
                          <button class="kn-shortcut" type="button" data-keyword="お金">🔘 お金</button>
                        </div>
                      </section>

                      <!-- 今日の処世術 -->
                      <section class="kn-section kn-today-section" aria-label="今日の処世術">
                        <div class="kn-section-header kn-today-header">
                          <div>
                            <h2 class="kn-section-title">今日の処世術</h2>
                            <p class="kn-section-subtitle">
                              ページを開くたび、または「更新」を押すたびにランダムで1つだけ表示します。
                            </p>
                          </div>
                          <button id="kn-today-refresh" class="kn-today-refresh-btn" type="button">
                            ↻ 更新
                          </button>
                        </div>
                        <div id="kn-today-card" class="kn-today-card-container">
                          <p class="kn-loading-text">処世術カードを読み込み中です…</p>
                        </div>
                      </section>
                    </section>
                  </div>
                </div>

                <!-- 右カラム：OS構造の説明カード（トップ時のみ表示） -->
                <aside class="kn-top-right">
                  <section class="kn-section kn-os-structure-section" aria-label="処世術OSの構造化">
                    <div class="kn-os-structure-card scroll-card scroll-card--primary">
                      <h2 class="kn-os-structure-title">処世術OSの全体構造</h2>
                      <p class="kn-os-structure-lead">
                        人生の「詰まり」を分解すると、だいたいこの5つのOSに整理できます。
                        どのOSが現在バグっているかを見極めるのが、この処世術禄の使い方です。
                      </p>
                      <ul class="kn-os-structure-list">
                        <li>
                          <span class="kn-os-pill">内部OS</span>
                          <span class="kn-os-structure-text">感情・思考・自己イメージなど、心の扱い方。</span>
                        </li>
                        <li>
                          <span class="kn-os-pill">対人OS</span>
                          <span class="kn-os-structure-text">家族・友人・職場との距離感、コミュニケーション。</span>
                        </li>
                        <li>
                          <span class="kn-os-pill">社会OS</span>
                          <span class="kn-os-structure-text">評価・立ち回り・リスク管理など、社会との付き合い方。</span>
                        </li>
                        <li>
                          <span class="kn-os-pill">行動OS</span>
                          <span class="kn-os-structure-text">習慣・行動パターン・小さな一手をどう積むか。</span>
                        </li>
                        <li>
                          <span class="kn-os-pill">未来OS</span>
                          <span class="kn-os-structure-text">学び・情報収集・AI活用・キャリア戦略。</span>
                        </li>
                      </ul>
                      <p class="kn-os-structure-footer">
                        「いま自分はどのOSで詰まっている？」と問いながら、カードを拾っていくのがコツです。
                      </p>
                    </div>
                  </section>
                </aside>
              </div>

              <!-- ▼OSモード：特定OSを選んだときの一覧エリア -->
              <section id="os-mode" class="kn-section kn-os-mode-section" aria-label="OS別の処世術一覧" hidden>
                <div class="kn-results-header">
                  <h2 class="kn-section-title" id="kn-results-title">処世術カード一覧</h2>
                  <p id="kn-results-meta" class="kn-results-meta">
                    サブカテゴリで、OS内のカードを絞り込みます。
                  </p>
                </div>

                <!-- サブカテゴリタブ -->
                <div id="kn-subcategory-tabs" class="kn-subtabs" aria-label="サブカテゴリで絞り込む">
                  <!-- JSで生成 -->
                </div>

                <!-- カードグリッド（PC：2列 / スマホ：1列） -->
                <div id="kn-results-container" class="kn-card-grid" aria-live="polite">
                  <!-- JSでカード生成 -->
                </div>
              </section>

              <!-- ▼検索モード：OS横断キーワード検索 -->
              <section
                id="search-mode"
                class="kn-section kn-search-mode-section"
                aria-label="OS横断の処世術検索"
                hidden
              >
                <div class="kn-results-header">
                  <h2 class="kn-section-title" id="kn-search-title">処世術 横断検索</h2>
                  <p id="kn-search-meta" class="kn-results-meta">
                    キーワードを入力すると、すべてのOSから該当する処世術カードを表示します。
                  </p>
                </div>

                <!-- 検索バー（ここに移動） -->
                <section class="kn-search-section" aria-label="処世術を検索する">
                  <div class="kn-search-inner">
                    <div class="kn-search-icon">
                      <svg
                        class="kn-search-svg"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        aria-hidden="true"
                      >
                        <circle cx="11" cy="11" r="6" stroke-width="2" />
                        <line x1="15.5" y1="15.5" x2="20" y2="20" stroke-width="2" />
                      </svg>
                    </div>
                    <input
                      id="kn-search-input"
                      class="kn-search-input"
                      type="search"
                      placeholder="キーワードで探す…（例：評価・転職・自信・不安 など）"
                      autocomplete="off"
                    />
                  </div>
                </section>

                <!-- 検索結果 -->
                <div
                  id="kn-search-results"
                  class="kn-card-grid"
                  aria-live="polite"
                >
                  <!-- JSでカード生成 -->
                </div>
              </section>
            </section>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- ========== フッター ========== -->
  <footer class="site-footer">
    <div class="container footer-inner">
      <p class="footer-copy">© 人生二周目録</p>
    </div>
  </footer>

  <!-- 共通JS ＋ このページ専用JS -->
  <script src="../main.js" defer></script>
  <script src="knowledge-notes.js" defer></script>
</body>
</html>
